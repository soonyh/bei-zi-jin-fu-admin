<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <link rel="shortcut icon" href="https://www.beizijinfu.com/hplus/favicon.ico">

  <!-- 引入jQuery -->
  <link href="https://www.beizijinfu.com/hplus/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://www.beizijinfu.com/hplus/css/bootstrap-spinner.css" rel="stylesheet">
  <link href="https://www.beizijinfu.com/hplus/css/font-awesome.min93e3.css?v=4.4.0" rel="stylesheet">
  <link href="https://www.beizijinfu.com/hplus/css/animate.min.css" rel="stylesheet">
  <link href="https://www.beizijinfu.com/hplus/css/style.min.css" rel="stylesheet">
  <link href="https://www.beizijinfu.com/hplus/css/plugins/dataTables/dataTables.bootstrap.css" rel="stylesheet">
  <link href="https://www.beizijinfu.com/hplus/css/plugins/treeview/bootstrap-treeview.css" rel="stylesheet">
  <link href="https://www.beizijinfu.com/hplus/css/plugins/jsTree/style.min.css" rel="stylesheet">
  <link href="https://www.beizijinfu.com/hplus/css/plugins/select/bootstrap-select.min.css" rel="stylesheet">
  <link href="https://www.beizijinfu.com/hplus/css/bootstrap.min14ed.css?v=3.3.6" rel="stylesheet">
  <link href="https://www.beizijinfu.com/hplus/css/animate.min.css" rel="stylesheet">
  <link href="https://www.beizijinfu.com/hplus/css/style.min862f.css?v=4.1.0" rel="stylesheet">
  <link href="https://www.beizijinfu.com/hplus/css/jquery.treegrid.css" rel="stylesheet">
  <link href="https://www.beizijinfu.com/hplus/css/plugins/toastr/toastr.min.css">
  <link href="https://www.beizijinfu.com/hplus/favicon.ico" rel="shortcut icon">
  <link href="https://www.beizijinfu.com/hplus/css/plugins/iCheck/custom.css" rel="stylesheet">
  <link href="hplus/css/logo+navbar20170905.css" rel="stylesheet">
  <meta http-equiv="X-UA-Compatible" content="edge" />
  <title>订单查询</title>
  <style>
    .col_class {
      color: #388d62;
    }
    .cos_class {
      color: #ed5565;
    }
    .cob_class {
      color: #0f98dc;
    }
    .font_size {
      font-size: 20px;
    }
    .order-amount {
      padding: 20px 0 0;
      margin: 0 auto;
      min-width: 720px;
      max-width: 800px;
      overflow: visible;
    }
    .tr-amount,
    .re-amount,
    .num-amount {
      margin: 10px;
      padding: 10px 30px;
      float: left;
      min-width: 190px;
      border-radius: 3px;
    }
    .tr-amount {
      background: #dff0d8;
    }
    .re-amount {
      background: #f2dede;
    }
    .num-amount {
      background: #d9edf7;
    }
    .tr-amount .yuan-icon {
      background: url(https://www.beizijinfu.com/img/order/yuan.svg) no-repeat 0px 0px;
      padding-right: 40px;
      width: 40px;
    }
    .re-amount .back-icon {
      background: url(https://www.beizijinfu.com/img/order/back.svg) no-repeat 0px 0px;
      padding-right: 40px;
      width: 40px;
    }
    .num-amount .ord-icon {
      background: url(https://www.beizijinfu.com/img/order/ord.svg) no-repeat 0px 0px;
      padding-right: 40px;
      width: 40px;
    }
    .tr-a-t,
    .re-a-t,
    .num-a-t {
      min-width: 100px;
      font-weight: bold;
      font-size: 20px;
      line-height: 40px;
    }
    .tr-a-c,
    .re-a-c,
    .num-a-c {
      padding-left: 0;
      font-size: 16px;
      line-height: 40px;
      font-weight: bolder;
    }
  </style>
</head>

<body class="gray-bg">
  <div class="wrapper wrapper-content animated fadeInRight">
    <div class="row">
      <div class="col-sm-12">
        <div class="ibox">
          <div class="ibox-title ibox-title-red">
            <h5>订单查询</h5>
            <div class="pull-right" style="margin-top:-3px;">
              <span class="label label-primary" style="line-height:19px;"><i class="fa fa-rmb"></i> 交易金额：<b>0</b>元</span>
              <span class="label label-danger" style="line-height:19px;"><i class="fa fa-retweet"></i> 退款金额：<b>0</b>元</span>
              <span class="label label-info" style="line-height:19px;"><i class="fa fa-text-o"></i> 订单数：<b>0</b>笔</span>
              <span class="label" style="line-height:19px; cursor:pointer;" type="button" onclick="$('#search-bar').toggleClass('hidden')"><i class="fa fa-search"></i> 展开</span>
            </div>
            <ul class="category-list" style="padding: 0;" id="leftAppMuen">
              <div class="ibox-tools" id="showdiv" style="display: none;"> <a href="https://www.beizijinfu.com/userapp/mian.htm" class="btn btn-xs btn-primary">返回</a> </div>
            </ul>
          </div>
          <div class="ibox-content">
            <form role="form" class="row hidden animated fadeIn" id="search-bar">
              <div class="form-group col-lg-3 col-md-3  col-sm-4 col-xs-6">
                <label for="" class="form-label">&nbsp;&nbsp;订单号：</label>
                <input type="text" placeholder="请输入" id="trade_no" class="form-control">
              </div>
              <div class="form-group col-lg-3 col-md-3  col-sm-4 col-xs-6">
                <label for="" class="form-label">订单时间：</label>
                <div class="input-group">
                  <input type="text" placeholder="开始时间" id="beginTime" class="form-control" placeholder="YYYY-MM-DD" onclick="laydate({istime: true, format: 'YYYY-MM-DD'})">
                  <span class="" style="width:1%; display:table-cell; white-space:nowrap; font-size:0;">&nbsp;</span>
                  <input type="text" placeholder="结束时间" id="endTime" class="form-control" placeholder="YYYY-MM-DD" onclick="laydate({istime: true, format: 'YYYY-MM-DD'})">
                </div>
              </div>
              <div class="form-group col-lg-3 col-md-3  col-sm-4 col-xs-6">
                <label for="" class="form-label">订单状态：</label>
                <select class="form-control" id="order_status">
                  <option value="">全部</option>
                  <option value="1">等待支付</option>
                  <option value="2">交易关闭</option>
                  <option value="3">交易撤销</option>
                  <option value="4" selected="selected">交易成功</option>
                  <option value="5">退款成功</option>
                </select>
              </div>
              <!--   <div class="form-group col-lg-3 col-md-3  col-sm-4 col-xs-6">
                            <label for="" class="form-label">支付场景：</label>
                            <select class="form-control" id="orderScene">
                              <option value="1">电脑</option>
                              <option value="2">手机</option>
                              <option value="3">扫码</option>
                            </select>
                        </div> -->
              <div class="form-group col-lg-3 col-md-3  col-sm-4 col-xs-6">
                <label for="" class="form-label">支付通道：</label>
                <select class="form-control" id="plat">
                  <option value="">全部</option>
                  <option value="CPQK">畅捷支付</option>
                  <option value="ALI">官方支付宝</option>
                  <option value="WX">官方微信</option>
                </select>
              </div>
              <div class="form-group col-lg-3 col-md-3  col-sm-4 col-xs-6">
                <label for="" class="form-label">交易金额：</label>
                <div class="input-group">
                  <select class="form-control" id="moneyWhere" style="width:80px;">
                    <option value="0">大于</option>
                    <option value="1">等于</option>
                    <option value="2">小于</option>
                  </select><span class="" style="width:1%; display:table-cell; white-space:nowrap; font-size:0;">&nbsp;</span>
                  <input type="number" placeholder="金额" id="trade_amount" class="form-control">
                </div>
              </div>
              <div class="form-group col-lg-3 col-md-3  col-sm-4 col-xs-6">
                <label for="" class="form-label">应用名称：</label>
                <select id="appid" name="appid" class="form-control">
                  <option value="">请选择应用....</option>
                  <option value="908502452092006400">商城1</option>
                </select>
              </div>
              <div class="form-group col-lg-3 col-md-3  col-sm-4 col-xs-6" style="padding-top:23px;">
                <button class="btn btn-primary" type="button" onclick="getfun();">查询</button>
                <button class="btn btn-default btn-outline" type="button" onclick="fromReset();">重置</button>
                <a href="javascript:;" id="export" class="btn">导出订单</a>
              </div>
            </form>
            <table id="dataGrid" class="table table-striped  table-hover table-bordered table-nowrap">
              <thead class="text-center ">
                <tr>
                  <th>序号</th>
                  <th>订单号</th>
                  <th>应用名称</th>
                  <th>交易金额</th>
                  <th>手续费</th>
                  <th>退款金额</th>
                  <th>订单状态</th>
                  <th>下单时间</th>
                  <th>支付时间</th>
                  <th>商户名称</th>
                  <th>员工姓名</th>
                  <th>支付通道</th>
                  <th>操作</th>
                </tr>
              </thead>
              <tbody>
                <tr colspan="13" class="text-center"><td>暂无数据</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <link rel="shortcut icon" href="https://www.beizijinfu.com/style/images/index/favicon.png" />
  <script src="https://www.beizijinfu.com/hplus/js/jquery-2.2.3.min.js"></script>
  <script src="https://www.beizijinfu.com/hplus/js/bootstrap.min.js?v=3.3.6"></script>

  <!-- 引入my97日期时间控件 -->

  <!-- 扩展表单校验 -->

  <!-- 三级联动 -->
  <script type="text/javascript" src="https://www.beizijinfu.com/jslib/select/area.js" charset="utf-8"></script>

  <!-- ajax 文件上传 -->
  <script type="text/javascript" src="https://www.beizijinfu.com/jslib/ajaxfileupload.js" charset="utf-8"></script>
  <script type="text/javascript" src="https://www.beizijinfu.com/jslib/extJquery.js" charset="utf-8"></script>
  <link rel="stylesheet" href="https://www.beizijinfu.com/kindeditor-4.1.10/themes/default/default.css" />
  <script charset="utf-8" src="https://www.beizijinfu.com/kindeditor-4.1.10//kindeditor-min.js"></script>
  <script charset="utf-8" src="https://www.beizijinfu.com/kindeditor-4.1.10//lang/zh_CN.js"></script>
  <script src="https://www.beizijinfu.com/hplus/js/plugins/metisMenu/jquery.metisMenu.js"></script>
  <script src="https://www.beizijinfu.com/hplus/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
  <script src="https://www.beizijinfu.com/hplus/js/plugins/layer/layer.min.js"></script>
  <script src="https://www.beizijinfu.com/hplus/js/plugins/pace/pace.min.js"></script>
  <script src="https://www.beizijinfu.com/hplus/js/contabs.min.js"></script>
  <script src="https://www.beizijinfu.com/hplus/js/hplus.min.js?v=4.1.0"></script>
  <!-- <script src="https://www.beizijinfu.com/hplus/js/plugins/jeditable/jquery.jeditable.js"></script> -->
  <!-- <script src="https://www.beizijinfu.com/hplus/js/plugins/dataTables/jquery.dataTables.js"></script> -->
  <script src="hplus/plugins/data-tables/jquery.dataTables.min.js" type="text/javascript"></script>
  <script src="https://www.beizijinfu.com/hplus/js/plugins/dataTables/dataTables.bootstrap.js"></script>
  <script src="hplus/plugins/data-tables/dataTables.fixedColumns.js" type="text/javascript"></script>
  <script src="https://www.beizijinfu.com/hplus/js/plugins/jquery.spinner.js"></script>
  <script src="https://www.beizijinfu.com/hplus/js/plugins/validate/jquery.metadata.js"></script>
  <script src="https://www.beizijinfu.com/hplus/js/plugins/validate/jquery.validate.min.js"></script>
  <script src="https://www.beizijinfu.com/hplus/js/plugins/validate/messages_zh.min.js"></script>
  <script src="https://www.beizijinfu.com/hplus/js/plugins/treeview/bootstrap-treeview.js"></script>
  <script src="https://www.beizijinfu.com/hplus/js/plugins/treeview/jsonToTree.js"></script>
  <script src="https://www.beizijinfu.com/hplus/js/plugins/jsTree/jstree.min.js"></script>
  <script src="https://www.beizijinfu.com/hplus/js/plugins/select/bootstrap-select.min.js"></script>
  <!-- <script src="https://www.beizijinfu.com/js/colResizable-1.6.js"></script> -->
  <script src="https://www.beizijinfu.com/js/ajaxfileupload.js"></script>
  <script src="https://www.beizijinfu.com/js/beizi.validate.js"></script>
  <script type="text/javascript">
    $(window).load(function() {
      $("#loading").fadeOut();
    });



    //公共方法
    var pubMethod = {
      bind: function(control, code) {
        if (control == '' || code == '') {
          return;
        }

        $('#' + control).combobox({
          url: '/dictionary/combox?code=' + code,
          method: 'get',
          valueField: 'id',
          textField: 'text',
          editable: false,
          panelHeight: 'auto',
          required: true
        });
      }
    }

    function logout() {
      $.post('/admin/logout.htm', function(result) {
        if (result.success) {
          window.location.href = '/index.htm';
        }
      }, 'json');
    }

    function editUserPwd() {
      parent.layer.open({
        type: 2,
        title: "修改密码",
        shade: 0.5,
        area: ['900px', '500px'],
        shift: 2,
        btn: ['提交', '关闭'],
        yes: function(index, layero) {
          var framefrom = parent.window.frames["layui-layer-iframe" + index];
          framefrom.submitForm();
        },
        cancel: function(index, layero) {

        },
        content: ['/user/editPwdPage.htm?id=907902763860750336'],
        end: function(result) {
          getfun();
        }
      });

    }

    function FormatAfterDotNumber(ValueString, nAfterDotNum) {
      var ValueString, nAfterDotNum;
      var resultStr, nTen;
      ValueString = "" + ValueString + "";
      strLen = ValueString.length;
      dotPos = ValueString.indexOf(".", 0);
      if (dotPos == -1) {
        resultStr = ValueString + ".";
        for (i = 0; i < nAfterDotNum; i++) {
          resultStr = resultStr + "0";
        }
        return resultStr;
      } else {
        if ((strLen - dotPos - 1) >= nAfterDotNum) {
          nAfter = dotPos + nAfterDotNum + 1;
          nTen = 1;
          for (j = 0; j < nAfterDotNum; j++) {
            nTen = nTen * 10;
          }
          resultStr = Math.round(parseFloat(ValueString) * nTen) / nTen;
          return resultStr;
        } else {
          resultStr = ValueString;
          for (i = 0; i < (nAfterDotNum - strLen + dotPos + 1); i++) {
            resultStr = resultStr + "0";
          }
          return resultStr;
        }
      }
    }
  </script>
  <script src="https://www.beizijinfu.com/hplus/js/jquery.treegrid.js"></script>
  <script src="https://www.beizijinfu.com/hplus/js/jquery.treegrid.bootstrap3.js"></script>
  <script src="https://www.beizijinfu.com/hplus/js/bootstrap-number-input.js"></script>
  <script src="https://www.beizijinfu.com/hplus/js/plugins/toastr/toastr.min.js"></script>
  <script src="https://www.beizijinfu.com/hplus/js/plugins/layer/laydate/laydate.js"></script>
  <script> $('#dataGrid').dataTable({
        "processing": true,
        "ajax": {
          "url": "data1.json",
          "type": "POST"
        },
        "searching": false,
         "info": false,
        // "pagingType": "bootstrap_full_number",
        "pagingType": "full_numbers",
        "lengthChange": false,
        "ordering": false,
        "columns": [{
          "data": null,
          "sClass": "text-center",
          "sWidth": "24px"
        }, {
          "data": "trade_no",
          "sClass": "text-center",
          "sWidth": "143px"
        }, {
          "data": "appname",
          "sClass": "text-center"
        }, {
          "data": "trade_amount",
          "sClass": "text-center col_class"
        }, {
          "data": "service_charge",
          "sClass": "text-center col_class"
        }, {
          "data": "refund",
          "sClass": "text-center cos_class"
        }, {
          "data": "order_status",
          "sClass": "text-center"
        }, {
          "data": "trade_time",
          "sClass": "text-center"
        }, {
          "data": "pay_time",
          "sClass": "text-center"
        }, {
          "data": "mer_name",
          "sClass": "text-center"
        }, {
          "data": "user_name",
          "sClass": "text-center"
        }, {
          "data": "plat",
          "sClass": "text-center"
        }, {
          "data": null,
          "sClass": "text-center"
        }, ],
        "columnDefs": [{
          "targets": 6,
          render: function(data, type, row) {
            var stateStr = '';
            if (row.order_status == '1') {
              stateStr = '等待支付';
            }
            if (row.order_status == '2') {
              stateStr = '交易关闭';
            }
            if (row.order_status == '3') {
              stateStr = '交易撤销';
            }
            if (row.order_status == '4') {
              stateStr = '交易成功';
            }
            return stateStr;
          }
        }, {
          "targets": 12,
          render: function(data, type, row) {
            var stateStr = '';
            stateStr += $.formatString('<a href="javascript:void(0)" onclick="editFun(\'{0}\');" class="btn btn-white btn-sm"><i class="fa fa-pencil"></i> 明细 </a>', row.id);
            return stateStr;
          }
        }],
        "oLanguage": {
          "oPaginate": {
            "sFirst": "首页",
            "sPrevious": "前一页",
            "sNext": "后一页",
            "sLast": "尾页"
          }
        },
        "scrollX": true,
        "autoWidth": true,
        "scrollCollapse": true,
        "fixedColumns": {
          "leftColumns": 1,
          "rightColumns": 1,
        },
        fnDrawCallback: function() {　　
          this.api().column(0).nodes().each(function(cell, i) {　　
            cell.innerHTML = i + 1;　　
          });
        }
      });
  </script>
</body>

</html>
